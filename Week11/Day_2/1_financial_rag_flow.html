<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Advisor RAG Crew - Complete Pipeline</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #4CAF50;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
        }

        .pipeline-overview {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
        }

        .pipeline-overview h2 {
            font-size: 2em;
            margin-bottom: 15px;
        }

        .pipeline-stages {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 20px;
        }

        .stage {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            min-width: 200px;
            backdrop-filter: blur(10px);
        }

        .stage-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-size: 1.5em;
            font-weight: bold;
        }

        .flow-section {
            margin: 40px 0;
            padding: 20px;
            border-radius: 15px;
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            box-shadow: inset 5px 5px 10px #d1d9e6, inset -5px -5px 10px #ffffff;
        }

        .section-title {
            font-size: 1.8em;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::before {
            content: "";
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(45deg, #4CAF50, #45a049);
        }

        .flow-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .flow-item {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border-left: 5px solid;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .flow-item::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .flow-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.2);
        }

        .flow-item:hover::before {
            opacity: 1;
        }

        .preprocessing { border-left-color: #e67e22; }
        .extraction { border-left-color: #e74c3c; }
        .chunking { border-left-color: #f39c12; }
        .embedding { border-left-color: #d35400; }
        .indexing { border-left-color: #c0392b; }
        .initialization { border-left-color: #8e44ad; }
        .tools { border-left-color: #3498db; }
        .agents { border-left-color: #2980b9; }
        .tasks { border-left-color: #9b59b6; }
        .execution { border-left-color: #1abc9c; }

        .item-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .item-description {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .item-details {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
        }

        .flow-arrow {
            text-align: center;
            margin: 20px 0;
            font-size: 2em;
            color: #4CAF50;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .agents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .agent-card {
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            box-shadow: 5px 5px 10px #d1d9e6, -5px -5px 10px #ffffff;
            transition: all 0.3s ease;
        }

        .agent-card:hover {
            transform: scale(1.05);
        }

        .agent-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            color: white;
        }

        .document-analyst .agent-icon { background: linear-gradient(45deg, #FF6B6B, #FF8E8E); }
        .financial-analyst .agent-icon { background: linear-gradient(45deg, #4ECDC4, #44A08D); }
        .comparative-analyst .agent-icon { background: linear-gradient(45deg, #45B7D1, #2E86AB); }
        .investment-strategist .agent-icon { background: linear-gradient(45deg, #96CEB4, #FECA57); }
        .risk-analyst .agent-icon { background: linear-gradient(45deg, #9B59B6, #8E44AD); }

        .code-snippet {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            overflow-x: auto;
            border-left: 4px solid #4CAF50;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-success { background: #4CAF50; }
        .status-warning { background: #ff9800; }
        .status-error { background: #f44336; }

        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
        }

        .workflow-diagram {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .workflow-step {
            display: flex;
            align-items: center;
            margin: 15px 0;
            padding: 15px;
            background: linear-gradient(90deg, #f8f9fa, #ffffff);
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 20px;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .step-description {
            color: #666;
            font-size: 0.9em;
        }

        .phase-separator {
            background: linear-gradient(90deg, #ff7675, #fdcb6e);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin: 40px 0;
            font-size: 1.5em;
            font-weight: bold;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .tech-stack {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 20px;
        }

        .tech-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            min-width: 120px;
        }

        .tech-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .uml-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            overflow-x: auto;
        }

        .uml-diagram {
            width: 100%;
            height: auto;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            border: 2px solid #dee2e6;
        }

        .uml-legend {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            color: white;
        }

        .uml-legend-section h4 {
            margin-bottom: 15px;
            font-size: 1.2em;
            color: #fff;
        }

        .legend-symbols {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .symbol-item {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 0.95em;
        }

        .symbol {
            width: 40px;
            height: 25px;
            border-radius: 3px;
            flex-shrink: 0;
        }

        .external-symbol {
            background: #ff7675;
            border: 2px solid #d63031;
        }

        .process-symbol {
            background: #74b9ff;
            border: 2px solid #0984e3;
        }

        .datastore-symbol {
            background: none;
            border: 2px solid #00b894;
        }

        .decision-symbol {
            background: #fdcb6e;
            border: 2px solid #e17055;
            transform: rotate(45deg);
            width: 25px;
            height: 25px;
        }

        .flow-symbol {
            background: #2d3436;
            height: 3px;
            position: relative;
        }

        .flow-symbol::after {
            content: "‚ñ∂";
            position: absolute;
            right: -5px;
            top: -8px;
            color: #2d3436;
            font-size: 12px;
        }

        .data-types {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .data-type {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 0.9em;
            backdrop-filter: blur(10px);
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .flow-grid {
                grid-template-columns: 1fr;
            }
            
            .legend {
                flex-direction: column;
                align-items: center;
            }
            
            .pipeline-stages {
                flex-direction: column;
            }
            
            .tech-stack {
                flex-direction: column;
            }

            .uml-legend {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .uml-container {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè¶ Financial Advisor RAG Crew</h1>
            <p>Complete Pipeline Visualization - From PDF to Investment Analysis</p>
        </div>

        <div class="pipeline-overview">
            <h2>üìä Two-Stage Pipeline Architecture</h2>
            <div class="pipeline-stages">
                <div class="stage">
                    <div class="stage-number">1</div>
                    <h3>Preprocessing</h3>
                    <p>PDF ‚Üí Text ‚Üí Chunks ‚Üí Embeddings ‚Üí FAISS Index</p>
                </div>
                <div class="stage">
                    <div class="stage-number">2</div>
                    <h3>Analysis</h3>
                    <p>Load Index ‚Üí Deploy Agents ‚Üí Generate Reports</p>
                </div>
            </div>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color preprocessing"></div>
                <span>Preprocessing</span>
            </div>
            <div class="legend-item">
                <div class="legend-color extraction"></div>
                <span>Text Extraction</span>
            </div>
            <div class="legend-item">
                <div class="legend-color chunking"></div>
                <span>Chunking</span>
            </div>
            <div class="legend-item">
                <div class="legend-color embedding"></div>
                <span>Embeddings</span>
            </div>
            <div class="legend-item">
                <div class="legend-color indexing"></div>
                <span>Vector Indexing</span>
            </div>
            <div class="legend-item">
                <div class="legend-color tools"></div>
                <span>Tools</span>
            </div>
            <div class="legend-item">
                <div class="legend-color agents"></div>
                <span>AI Agents</span>
            </div>
            <div class="legend-item">
                <div class="legend-color execution"></div>
                <span>Execution</span>
            </div>
        </div>

        <div class="tech-stack">
            <div class="tech-item">
                <div class="tech-icon">üìÑ</div>
                <div>PyPDF2 / pdfplumber</div>
            </div>
            <div class="tech-item">
                <div class="tech-icon">‚úÇÔ∏è</div>
                <div>LangChain Splitter</div>
            </div>
            <div class="tech-item">
                <div class="tech-icon">üß†</div>
                <div>SentenceTransformers</div>
            </div>
            <div class="tech-item">
                <div class="tech-icon">üîç</div>
                <div>FAISS Vector DB</div>
            </div>
            <div class="tech-item">
                <div class="tech-icon">ü§ñ</div>
                <div>CrewAI Agents</div>
            </div>
            <div class="tech-item">
                <div class="tech-icon">üß≠</div>
                <div>OpenRouter GPT-4</div>
            </div>
        </div>

        <div class="flow-section">
            <h2 class="section-title">üîß Stage 1: Preprocessing & Index Creation</h2>
            <div class="workflow-diagram">
                <div class="workflow-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-title">PDF Text Extraction</div>
                        <div class="step-description">Extract text from annual reports using PyPDF2 or pdfplumber (better for tables)</div>
                    </div>
                </div>
                <div class="workflow-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-title">Document Processing</div>
                        <div class="step-description">Generate document IDs, extract metadata, and prepare text for chunking</div>
                    </div>
                </div>
                <div class="workflow-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <div class="step-title">Text Chunking</div>
                        <div class="step-description">Split text into overlapping chunks using RecursiveCharacterTextSplitter</div>
                    </div>
                </div>
                <div class="workflow-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <div class="step-title">Embedding Generation</div>
                        <div class="step-description">Create vector embeddings using SentenceTransformers (all-MiniLM-L6-v2)</div>
                    </div>
                </div>
                <div class="workflow-step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <div class="step-title">FAISS Index Creation</div>
                        <div class="step-description">Build vector index and save chunks.pkl, metadata.json, index.faiss</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="flow-section">
            <h2 class="section-title">üìù Preprocessing Components</h2>
            <div class="flow-grid">
                <div class="flow-item extraction">
                    <div class="item-title">
                        <span class="status-indicator status-success"></span>
                        PDF Text Extraction
                    </div>
                    <div class="item-description">
                        Dual-method approach for robust text extraction from financial PDFs.
                    </div>
                    <div class="code-snippet">
def extract_pdf_text(pdf_path: str, method: str = "pdfplumber"):
    if method == "pypdf2":
        text = extract_text_pypdf2(pdf_path)
    else:
        text = extract_text_pdfplumber(pdf_path)
    
    doc_id = hashlib.md5(pdf_path.encode()).hexdigest()
    return {"doc_id": doc_id, "text": text, ...}
                    </div>
                    <div class="item-details">
                        <strong>Methods:</strong> PyPDF2 (fast), pdfplumber (tables)<br>
                        <strong>Output:</strong> Structured document with metadata
                    </div>
                </div>

                <div class="flow-item chunking">
                    <div class="item-title">
                        <span class="status-indicator status-success"></span>
                        Text Chunking
                    </div>
                    <div class="item-description">
                        Intelligent text splitting with overlap to preserve context across chunks.
                    </div>
                    <div class="code-snippet">
def chunk_text(text: str, chunk_size: int = 1000, chunk_overlap: int = 200):
    text_splitter = RecursiveCharacterTextSplitter(
        chunk_size=chunk_size,
        chunk_overlap=chunk_overlap,
        separators=["\n\n", "\n", ".", " ", ""]
    )
    return text_splitter.split_text(text)
                    </div>
                    <div class="item-details">
                        <strong>Strategy:</strong> Recursive splitting with semantic separators<br>
                        <strong>Overlap:</strong> 200 chars to maintain context
                    </div>
                </div>

                <div class="flow-item embedding">
                    <div class="item-title">
                        <span class="status-indicator status-success"></span>
                        Embedding Generation
                    </div>
                    <div class="item-description">
                        Convert text chunks to vector embeddings using SentenceTransformers.
                    </div>
                    <div class="code-snippet">
def test_embedding_generation():
    device = 'cpu'
    test_model = SentenceTransformer('all-MiniLM-L6-v2', device=device)
    embeddings = test_model.encode(test_texts, batch_size=1)
    return embeddings
                    </div>
                    <div class="item-details">
                        <strong>Model:</strong> all-MiniLM-L6-v2 (384 dimensions)<br>
                        <strong>Device:</strong> CPU with thread limiting
                    </div>
                </div>

                <div class="flow-item indexing">
                    <div class="item-title">
                        <span class="status-indicator status-success"></span>
                        FAISS Index Creation
                    </div>
                    <div class="item-description">
                        Build efficient vector search index and save with metadata for later loading.
                    </div>
                    <div class="item-details">
                        <strong>Files Created:</strong><br>
                        ‚Ä¢ index.faiss (vector index)<br>
                        ‚Ä¢ chunks.pkl (text chunks)<br>
                        ‚Ä¢ metadata.json (document info)
                    </div>
                </div>
            </div>
        </div>

        <div class="phase-separator">
            üîÑ Index Created ‚Üí Loading into Crew System
        </div>

        <div class="flow-section">
            <h2 class="section-title">üöÄ Stage 2: Crew System Initialization</h2>
            <div class="workflow-diagram">
                <div class="workflow-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-title">Environment Setup</div>
                        <div class="step-description">Load environment variables, set up OpenRouter API, configure LLM</div>
                    </div>
                </div>
                <div class="workflow-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-title">Index Validation</div>
                        <div class="step-description">Check for existing FAISS index (notebook or LangChain format)</div>
                    </div>
                </div>
                <div class="workflow-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <div class="step-title">Embedding Compatibility</div>
                        <div class="step-description">Initialize dummy embeddings for index loading (no model download)</div>
                    </div>
                </div>
                <div class="workflow-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <div class="step-title">Vector Store Loading</div>
                        <div class="step-description">Load existing FAISS index and create vector search tools</div>
                    </div>
                </div>
                <div class="workflow-step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <div class="step-title">Crew Assembly</div>
                        <div class="step-description">Initialize agents, tasks, and crew with YAML configurations</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="flow-section">
            <h2 class="section-title">üõ†Ô∏è Core System Components</h2>
            <div class="flow-grid">
                <div class="flow-item tools">
                    <div class="item-title">
                        <span class="status-indicator status-success"></span>
                        VectorSearchTool
                    </div>
                    <div class="item-description">
                        Custom tool for semantic search through annual reports using loaded FAISS index.
                    </div>
                    <div class="item-details">
                        <strong>Methods:</strong> _run(), similarity_search_with_score()<br>
                        <strong>Returns:</strong> Formatted search results with scores and metadata
                    </div>
                </div>

                <div class="flow-item tools">
                    <div class="item-title">
                        <span class="status-indicator status-success"></span>
                        CustomFAISSLoader
                    </div>
                    <div class="item-description">
                        Adapter to load notebook-created FAISS index into LangChain format.
                    </div>
                    <div class="item-details">
                        <strong>Loads:</strong> index.faiss, chunks.pkl, metadata.json<br>
                        <strong>Converts:</strong> Raw FAISS ‚Üí LangChain FAISS
                    </div>
                </div>

                <div class="flow-item initialization">
                    <div class="item-title">
                        <span class="status-indicator status-warning"></span>
                        DummyEmbeddings
                    </div>
                    <div class="item-description">
                        Compatibility layer that doesn't load any model - only for existing index loading.
                    </div>
                    <div class="item-details">
                        <strong>Purpose:</strong> Interface compatibility<br>
                        <strong>Note:</strong> Returns zeros - never actually used for embedding
                    </div>
                </div>
            </div>
        </div>

        <div class="flow-section">
            <h2 class="section-title">ü§ñ AI Agents Architecture</h2>
            <div class="agents-grid">
                <div class="agent-card document-analyst">
                    <div class="agent-icon">üìÑ</div>
                    <h3>Document Analyst</h3>
                    <p>Extracts key information from annual reports using vector search</p>
                </div>
                <div class="agent-card financial-analyst">
                    <div class="agent-icon">üìä</div>
                    <h3>Financial Analyst</h3>
                    <p>Analyzes financial metrics, ratios, and performance indicators</p>
                </div>
                <div class="agent-card comparative-analyst">
                    <div class="agent-icon">‚öñÔ∏è</div>
                    <h3>Comparative Analyst</h3>
                    <p>Compares multiple companies based on extracted financial data</p>
                </div>
                <div class="agent-card investment-strategist">
                    <div class="agent-icon">üí°</div>
                    <h3>Investment Strategist</h3>
                    <p>Provides investment recommendations based on analysis results</p>
                </div>
                <div class="agent-card risk-analyst">
                    <div class="agent-icon">‚ö†Ô∏è</div>
                    <h3>Risk Analyst</h3>
                    <p>Identifies and evaluates potential investment risks</p>
                </div>
            </div>
        </div>

        <div class="flow-section">
            <h2 class="section-title">üìã Task Execution Pipeline</h2>
            <div class="flow-grid">
                <div class="flow-item tasks">
                    <div class="item-title">
                        <span class="status-indicator status-success"></span>
                        Extract Report Data
                    </div>
                    <div class="item-description">
                        Use VectorSearchTool to find and extract key financial data from annual reports.
                    </div>
                    <div class="code-snippet">
@task
def extract_report_data(self) -> Task:
    return Task(config=self.tasks_config['extract_report_data'])
                    </div>
                </div>

                <div class="flow-item tasks">
                    <div class="item-title">
                        <span class="status-indicator status-success"></span>
                        Analyze Financials
                    </div>
                    <div class="item-description">
                        Calculate financial ratios and analyze performance metrics from extracted data.
                    </div>
                </div>

                <div class="flow-item tasks">
                    <div class="item-title">
                        <span class="status-indicator status-success"></span>
                        Compare Companies
                    </div>
                    <div class="item-description">
                        Perform comparative analysis between different companies using specified metrics.
                    </div>
                </div>

                <div class="flow-item tasks">
                    <div class="item-title">
                        <span class="status-indicator status-success"></span>
                        Assess Risks
                    </div>
                    <div class="item-description">
                        Identify potential investment risks and evaluate their impact.
                    </div>
                </div>

                <div class="flow-item tasks">
                    <div class="item-title">
                        <span class="status-indicator status-success"></span>
                        Generate Recommendations
                    </div>
                    <div class="item-description">
                        Create final investment recommendations based on all previous analyses.
                    </div>
                </div>
            </div>
        </div>

        <div class="flow-section">
            <h2 class="section-title">‚öôÔ∏è Execution Flow</h2>
            <div class="flow-item execution">
                <div class="item-title">
                    <span class="status-indicator status-success"></span>
                    Sequential Processing with CrewAI
                </div>
                <div class="item-description">
                    The crew executes tasks sequentially, with each agent contributing their expertise to build comprehensive investment analysis.
                </div>
                <div class="code-snippet">
# Main execution flow
financial_crew = FinancialAdvisorRAGCrew()
result = financial_crew.crew().kickoff(inputs=analysis_inputs)

# Process flow:
# 1. @before_kickoff: Prepare and validate inputs
# 2. Sequential task execution by specialized agents
# 3. @after_kickoff: Process output and add disclaimers
                </div>
                <div class="item-details">
                    <strong>Input Parameters:</strong> analysis_focus, investment_criteria, comparison_metrics<br>
                    <strong>Output:</strong> Comprehensive investment report with recommendations<br>
                    <strong>Process:</strong> Sequential agent collaboration using Process.sequential
                </div>
            </div>
        </div>

        <div class="flow-section">
            <h2 class="section-title">üîç Key Features & Dependencies</h2>
            <div class="flow-grid">
                <div class="flow-item preprocessing">
                    <div class="item-title">
                        <span class="status-indicator status-success"></span>
                        ‚úÖ Dual PDF Extraction
                    </div>
                    <div class="item-description">
                        PyPDF2 for speed, pdfplumber for tables - robust text extraction from financial documents.
                    </div>
                </div>

                <div class="flow-item chunking">
                    <div class="item-title">
                        <span class="status-indicator status-success"></span>
                        ‚úÖ Smart Text Chunking
                    </div>
                    <div class="item-description">
                        RecursiveCharacterTextSplitter with semantic separators and overlap preservation.
                    </div>
                </div>

                <div class="flow-item embedding">
                    <div class="item-title">
                        <span class="status-indicator status-success"></span>
                        ‚úÖ Efficient Embeddings
                    </div>
                    <div class="item-description">
                        SentenceTransformers with CPU optimization and thread limiting for stability.
                    </div>
                </div>

                <div class="flow-item initialization">
                    <div class="item-title">
                        <span class="status-indicator status-success"></span>
                        ‚úÖ Index-Only Mode
                    </div>
                    <div class="item-description">
                        No model loading during analysis - uses existing FAISS index only.
                    </div>
                </div>

                <div class="flow-item tools">
                    <div class="item-title">
                        <span class="status-indicator status-success"></span>
                        ‚úÖ YAML Configuration
                    </div>
                    <div class="item-description">
                        Agents and tasks configured via external YAML files for easy modification.
                    </div>
                </div>

                <div class="flow-item execution">
                    <div class="item-title">
                        <span class="status-indicator status-error"></span>
                        ‚ùå Two-Stage Dependency
                    </div>
                    <div class="item-description">
                        Analysis stage requires preprocessing stage to be completed first.
                    </div>
                </div>
            </div>
        </div>

        <div class="flow-section">
            <h2 class="section-title">üìã UML Data Flow Diagram</h2>
            <div class="uml-container">
                <svg viewBox="0 0 1200 800" class="uml-diagram">
                    <!-- External Entities -->
                    <g class="external-entity">
                        <rect x="50" y="50" width="100" height="60" fill="#ff7675" stroke="#d63031" stroke-width="2" rx="5"/>
                        <text x="100" y="85" text-anchor="middle" fill="white" font-weight="bold">PDF Files</text>
                    </g>

                    <!-- Process 1: Text Extraction -->
                    <g class="process">
                        <rect x="250" y="40" width="120" height="80" fill="#74b9ff" stroke="#0984e3" stroke-width="2" rx="5"/>
                        <text x="310" y="70" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Text Extraction</text>
                        <text x="310" y="85" text-anchor="middle" fill="white" font-size="10">(PyPDF2/pdfplumber)</text>
                        <text x="310" y="100" text-anchor="middle" fill="white" font-size="10">+ Metadata</text>
                    </g>

                    <!-- Data Store 1: Raw Text -->
                    <g class="data-store">
                        <rect x="450" y="55" width="100" height="50" fill="none" stroke="#00b894" stroke-width="2" rx="5"/>
                        <text x="500" y="85" text-anchor="middle" fill="#00b894" font-weight="bold">Raw Text</text>
                    </g>

                    <!-- Process 2: Text Chunking -->
                    <g class="process">
                        <rect x="250" y="170" width="120" height="80" fill="#a29bfe" stroke="#6c5ce7" stroke-width="2" rx="5"/>
                        <text x="310" y="200" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Text Chunking</text>
                        <text x="310" y="215" text-anchor="middle" fill="white" font-size="10">(RecursiveCharacter</text>
                        <text x="310" y="230" text-anchor="middle" fill="white" font-size="10">TextSplitter)</text>
                    </g>

                    <!-- Data Store 2: Chunks -->
                    <g class="data-store">
                        <rect x="450" y="185" width="100" height="50" fill="none" stroke="#00b894" stroke-width="2" rx="5"/>
                        <text x="500" y="215" text-anchor="middle" fill="#00b894" font-weight="bold">Text Chunks</text>
                    </g>

                    <!-- Process 3: Embedding Generation -->
                    <g class="process">
                        <rect x="250" y="300" width="120" height="80" fill="#fd79a8" stroke="#e84393" stroke-width="2" rx="5"/>
                        <text x="310" y="330" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Embedding</text>
                        <text x="310" y="345" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Generation</text>
                        <text x="310" y="360" text-anchor="middle" fill="white" font-size="10">(SentenceTransformers)</text>
                    </g>

                    <!-- Data Store 3: Vector Embeddings -->
                    <g class="data-store">
                        <rect x="450" y="315" width="100" height="50" fill="none" stroke="#00b894" stroke-width="2" rx="5"/>
                        <text x="500" y="340" text-anchor="middle" fill="#00b894" font-size="11" font-weight="bold">Vector</text>
                        <text x="500" y="355" text-anchor="middle" fill="#00b894" font-size="11" font-weight="bold">Embeddings</text>
                    </g>

                    <!-- Process 4: Index Creation -->
                    <g class="process">
                        <rect x="630" y="200" width="120" height="80" fill="#fdcb6e" stroke="#e17055" stroke-width="2" rx="5"/>
                        <text x="690" y="230" text-anchor="middle" fill="white" font-size="12" font-weight="bold">FAISS Index</text>
                        <text x="690" y="245" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Creation</text>
                        <text x="690" y="260" text-anchor="middle" fill="white" font-size="10">+ Save Metadata</text>
                    </g>

                    <!-- Data Store 4: FAISS Index -->
                    <g class="data-store">
                        <rect x="820" y="185" width="100" height="110" fill="none" stroke="#e17055" stroke-width="3" rx="5"/>
                        <text x="870" y="210" text-anchor="middle" fill="#e17055" font-weight="bold" font-size="12">FAISS Index</text>
                        <text x="870" y="230" text-anchor="middle" fill="#e17055" font-size="10">index.faiss</text>
                        <text x="870" y="245" text-anchor="middle" fill="#e17055" font-size="10">chunks.pkl</text>
                        <text x="870" y="260" text-anchor="middle" fill="#e17055" font-size="10">metadata.json</text>
                        <text x="870" y="280" text-anchor="middle" fill="#e17055" font-size="9" font-weight="bold">PERSISTENT</text>
                    </g>

                    <!-- === STAGE 2 SEPARATOR === -->
                    <line x1="50" y1="420" x2="1150" y2="420" stroke="#636e72" stroke-width="3" stroke-dasharray="10,5"/>
                    <text x="600" y="410" text-anchor="middle" fill="#636e72" font-weight="bold" font-size="14">STAGE 2: ANALYSIS</text>

                    <!-- Process 5: Index Loading -->
                    <g class="process">
                        <rect x="50" y="450" width="120" height="80" fill="#00b894" stroke="#00a085" stroke-width="2" rx="5"/>
                        <text x="110" y="480" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Index Loading</text>
                        <text x="110" y="495" text-anchor="middle" fill="white" font-size="10">(CustomFAISS</text>
                        <text x="110" y="510" text-anchor="middle" fill="white" font-size="10">Loader)</text>
                    </g>

                    <!-- Process 6: Vector Search Tool -->
                    <g class="process">
                        <rect x="250" y="450" width="120" height="80" fill="#0984e3" stroke="#74b9ff" stroke-width="2" rx="5"/>
                        <text x="310" y="480" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Vector Search</text>
                        <text x="310" y="495" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Tool</text>
                        <text x="310" y="510" text-anchor="middle" fill="white" font-size="10">semantic_search()</text>
                    </g>

                    <!-- External Entity: OpenRouter API -->
                    <g class="external-entity">
                        <rect x="450" y="570" width="100" height="60" fill="#6c5ce7" stroke="#a29bfe" stroke-width="2" rx="5"/>
                        <text x="500" y="595" text-anchor="middle" fill="white" font-size="11" font-weight="bold">OpenRouter</text>
                        <text x="500" y="610" text-anchor="middle" fill="white" font-size="11" font-weight="bold">GPT-4 API</text>
                    </g>

                    <!-- Process 7: AI Agents -->
                    <g class="process">
                        <rect x="650" y="450" width="150" height="120" fill="#e17055" stroke="#d63031" stroke-width="2" rx="5"/>
                        <text x="725" y="475" text-anchor="middle" fill="white" font-size="14" font-weight="bold">AI Agents Crew</text>
                        <text x="725" y="495" text-anchor="middle" fill="white" font-size="10">‚Ä¢ Document Analyst</text>
                        <text x="725" y="510" text-anchor="middle" fill="white" font-size="10">‚Ä¢ Financial Analyst</text>
                        <text x="725" y="525" text-anchor="middle" fill="white" font-size="10">‚Ä¢ Comparative Analyst</text>
                        <text x="725" y="540" text-anchor="middle" fill="white" font-size="10">‚Ä¢ Investment Strategist</text>
                        <text x="725" y="555" text-anchor="middle" fill="white" font-size="10">‚Ä¢ Risk Analyst</text>
                    </g>

                    <!-- Data Store 5: Analysis Results -->
                    <g class="data-store">
                        <rect x="900" y="475" width="100" height="70" fill="none" stroke="#00b894" stroke-width="2" rx="5"/>
                        <text x="950" y="505" text-anchor="middle" fill="#00b894" font-weight="bold" font-size="11">Analysis</text>
                        <text x="950" y="520" text-anchor="middle" fill="#00b894" font-weight="bold" font-size="11">Results</text>
                        <text x="950" y="535" text-anchor="middle" fill="#00b894" font-size="10">Investment Report</text>
                    </g>

                    <!-- Data Flow Arrows -->
                    <!-- Stage 1 Flows -->
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#2d3436"/>
                        </marker>
                    </defs>

                    <!-- PDF to Text Extraction -->
                    <line x1="150" y1="80" x2="250" y2="80" stroke="#2d3436" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="200" y="75" text-anchor="middle" fill="#2d3436" font-size="10">PDF Text</text>

                    <!-- Text Extraction to Raw Text -->
                    <line x1="370" y1="80" x2="450" y2="80" stroke="#2d3436" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="410" y="75" text-anchor="middle" fill="#2d3436" font-size="10">Raw Text</text>

                    <!-- Raw Text to Chunking -->
                    <line x1="500" y1="105" x2="500" y2="130" stroke="#2d3436" stroke-width="2"/>
                    <line x1="500" y1="130" x2="310" y2="130" stroke="#2d3436" stroke-width="2"/>
                    <line x1="310" y1="130" x2="310" y2="170" stroke="#2d3436" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="450" y="125" text-anchor="middle" fill="#2d3436" font-size="10">Text</text>

                    <!-- Chunking to Chunks -->
                    <line x1="370" y1="210" x2="450" y2="210" stroke="#2d3436" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="410" y="205" text-anchor="middle" fill="#2d3436" font-size="10">Chunks</text>

                    <!-- Chunks to Embedding -->
                    <line x1="500" y1="235" x2="500" y2="260" stroke="#2d3436" stroke-width="2"/>
                    <line x1="500" y1="260" x2="310" y2="260" stroke="#2d3436" stroke-width="2"/>
                    <line x1="310" y1="260" x2="310" y2="300" stroke="#2d3436" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="450" y="255" text-anchor="middle" fill="#2d3436" font-size="10">Chunks</text>

                    <!-- Embedding to Vectors -->
                    <line x1="370" y1="340" x2="450" y2="340" stroke="#2d3436" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="410" y="335" text-anchor="middle" fill="#2d3436" font-size="10">Vectors</text>

                    <!-- Vectors and Chunks to Index Creation -->
                    <line x1="550" y1="340" x2="600" y2="340" stroke="#2d3436" stroke-width="2"/>
                    <line x1="600" y1="340" x2="600" y2="240" stroke="#2d3436" stroke-width="2"/>
                    <line x1="600" y1="240" x2="630" y2="240" stroke="#2d3436" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="575" y="290" text-anchor="middle" fill="#2d3436" font-size="10">Vectors+</text>
                    <text x="575" y="305" text-anchor="middle" fill="#2d3436" font-size="10">Chunks</text>

                    <!-- Index Creation to FAISS -->
                    <line x1="750" y1="240" x2="820" y2="240" stroke="#2d3436" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="785" y="235" text-anchor="middle" fill="#2d3436" font-size="10">Index</text>

                    <!-- Stage 2 Flows -->
                    <!-- FAISS to Index Loading -->
                    <line x1="820" y1="240" x2="780" y2="240" stroke="#2d3436" stroke-width="2"/>
                    <line x1="780" y1="240" x2="780" y2="390" stroke="#2d3436" stroke-width="2"/>
                    <line x1="780" y1="390" x2="110" y2="390" stroke="#2d3436" stroke-width="2"/>
                    <line x1="110" y1="390" x2="110" y2="450" stroke="#2d3436" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="450" y="385" text-anchor="middle" fill="#2d3436" font-size="10">Load Index</text>

                    <!-- Index Loading to Vector Search -->
                    <line x1="170" y1="490" x2="250" y2="490" stroke="#2d3436" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="210" y="485" text-anchor="middle" fill="#2d3436" font-size="10">Loaded Index</text>

                    <!-- Vector Search to Agents -->
                    <line x1="370" y1="490" x2="400" y2="490" stroke="#2d3436" stroke-width="2"/>
                    <line x1="400" y1="490" x2="400" y2="510" stroke="#2d3436" stroke-width="2"/>
                    <line x1="400" y1="510" x2="650" y2="510" stroke="#2d3436" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="510" y="485" text-anchor="middle" fill="#2d3436" font-size="10">Search Results</text>

                    <!-- OpenRouter to Agents -->
                    <line x1="550" y1="580" x2="600" y2="580" stroke="#2d3436" stroke-width="2"/>
                    <line x1="600" y1="580" x2="600" y2="550" stroke="#2d3436" stroke-width="2"/>
                    <line x1="600" y1="550" x2="650" y2="550" stroke="#2d3436" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="575" y="575" text-anchor="middle" fill="#2d3436" font-size="10">LLM</text>

                    <!-- Agents to Results -->
                    <line x1="800" y1="510" x2="900" y2="510" stroke="#2d3436" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="850" y="505" text-anchor="middle" fill="#2d3436" font-size="10">Final Report</text>

                    <!-- Decision Diamond for Index Check -->
                    <g class="decision">
                        <polygon points="110,350 140,370 110,390 80,370" fill="#fdcb6e" stroke="#e17055" stroke-width="2"/>
                        <text x="110" y="375" text-anchor="middle" fill="#2d3436" font-size="8" font-weight="bold">Index?</text>
                    </g>

                    <!-- Labels for stages -->
                    <rect x="20" y="20" width="140" height="25" fill="#ddd" stroke="#bbb" rx="3"/>
                    <text x="90" y="37" text-anchor="middle" fill="#2d3436" font-weight="bold">STAGE 1: PREPROCESSING</text>

                    <rect x="20" y="440" width="140" height="25" fill="#ddd" stroke="#bbb" rx="3"/>
                    <text x="90" y="457" text-anchor="middle" fill="#2d3436" font-weight="bold">STAGE 2: ANALYSIS</text>
                </svg>
            </div>

            <div class="uml-legend">
                <div class="uml-legend-section">
                    <h4>üéØ UML Symbols</h4>
                    <div class="legend-symbols">
                        <div class="symbol-item">
                            <div class="symbol external-symbol"></div>
                            <span>External Entity</span>
                        </div>
                        <div class="symbol-item">
                            <div class="symbol process-symbol"></div>
                            <span>Process</span>
                        </div>
                        <div class="symbol-item">
                            <div class="symbol datastore-symbol"></div>
                            <span>Data Store</span>
                        </div>
                        <div class="symbol-item">
                            <div class="symbol decision-symbol"></div>
                            <span>Decision</span>
                        </div>
                        <div class="symbol-item">
                            <div class="symbol flow-symbol"></div>
                            <span>Data Flow</span>
                        </div>
                    </div>
                </div>
                <div class="uml-legend-section">
                    <h4>üìä Data Types</h4>
                    <div class="data-types">
                        <div class="data-type">üìÑ Raw PDF Text</div>
                        <div class="data-type">‚úÇÔ∏è Text Chunks (1000 chars)</div>
                        <div class="data-type">üß† Vector Embeddings (384D)</div>
                        <div class="data-type">üîç FAISS Index + Metadata</div>
                        <div class="data-type">üìã Search Results + Scores</div>
                        <div class="data-type">üéØ Investment Analysis Report</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="flow-arrow">‚Üì</div>
        <div style="text-align: center; padding: 20px; background: linear-gradient(45deg, #4CAF50, #45a049); border-radius: 15px; color: white;">
            <h3>üìä Final Output: Comprehensive Investment Analysis Report</h3>
            <p>Complete financial analysis with risk assessment and investment recommendations</p>
            <p style="margin-top: 10px; opacity: 0.9; font-size: 0.9em;">
                From Raw PDFs ‚Üí Vector Embeddings ‚Üí AI-Powered Analysis ‚Üí Actionable Insights
            </p>
        </div>
    </div>

    <script>
        // Add interactive hover effects
        document.querySelectorAll('.flow-item').forEach(item => {
            item.addEventListener('click', function() {
                const details = this.querySelector('.item-details');
                if (details) {
                    details.style.display = details.style.display === 'none' ? 'block' : 'none';
                }
            });
        });

        // Add smooth scrolling for better UX
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Add loading animation for better visual feedback
        window.addEventListener('load', function() {
            document.querySelectorAll('.flow-item').forEach((item, index) => {
                setTimeout(() => {
                    item.style.opacity = '0';
                    item.style.transform = 'translateY(20px)';
                    item.style.transition = 'all 0.5s ease';
                    
                    setTimeout(() => {
                        item.style.opacity = '1';
                        item.style.transform = 'translateY(0)';
                    }, 100);
                }, index * 100);
            });
        });

        // Add click to expand functionality
        document.querySelectorAll('.tech-item').forEach(item => {
            item.addEventListener('click', function() {
                this.style.transform = this.style.transform === 'scale(1.1)' ? 'scale(1)' : 'scale(1.1)';
            });
        });
    </script>
</body>
</html>